{
  "openapi": "3.1.0",
  "info": {
    "title": "Phone Status API",
    "description": "API documentation for Phone Status endpoint",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://sandbox-umbrella-api.azurewebsites.net/api/services/",
      "description": "Sandbox Server"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/phoneStatus": {
      "post": {
        "summary": "Phone Status Check",
        "description": "Get insights about a phone number such as whether it is active or disconnected, whether its associated device is reachable or unreachable, and its associated device's roaming status.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PhoneStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully retrieved phone status.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PhoneStatusResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error400"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized request.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error401"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error403"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error500"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "PhoneStatusRequest": {
        "type": "object",
        "required": ["phone"],
        "properties": {
          "phone": {
            "type": "string",
            "description": "The phone number to check, including country code.",
            "example": "+436504142107"
          }
        }
      },
      "PhoneStatusResponse": {
        "type": "object",
        "properties": {
          "reference_id": {
            "type": "string",
            "description": "Unique reference ID for the transaction.",
            "example": "36475B3EB1DC0C2492E2889F4EACF2CC"
          },
          "sub_resource": {
            "type": "string",
            "description": "Sub-resource type (e.g., 'live').",
            "example": "live"
          },
          "status": {
            "type": "object",
            "properties": {
              "code": {
                "type": "number",
                "description": "Status code (e.g., 300 for success).",
                "example": 300
              },
              "description": {
                "type": "string",
                "description": "Status description.",
                "example": "Transaction successfully completed"
              },
              "updatedOn": {
                "type": "string",
                "description": "Timestamp of the last update (ISO 8601 format).",
                "example": "2024/09/09T12:43:42.701105Z"
              }
            }
          },
          "errors": {
            "type": "array",
            "description": "List of errors, if any.",
            "items": {
              "type": "string"
            }
          },
          "phoneType": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "description": "Phone type code (e.g., '2' for mobile).",
                "example": "2"
              },
              "description": {
                "type": "string",
                "description": "Phone type description.",
                "example": "MOBILE"
              }
            }
          },
          "blocklisting": {
            "type": "object",
            "properties": {
              "blocked": {
                "type": "boolean",
                "description": "Whether the number is blocked.",
                "example": false
              },
              "blockCode": {
                "type": "number",
                "description": "Block code (e.g., 0 for not blocked).",
                "example": 0
              },
              "blockDescription": {
                "type": "string",
                "description": "Block description.",
                "example": "Not blocked"
              }
            }
          },
          "numbering": {
            "type": "object",
            "properties": {
              "cleansing": {
                "type": "object",
                "properties": {
                  "call": {
                    "type": "object",
                    "properties": {
                      "countryCode": {
                        "type": "string",
                        "description": "Country code.",
                        "example": "43"
                      },
                      "phoneNumber": {
                        "type": "string",
                        "description": "Phone number.",
                        "example": "6504142107"
                      },
                      "cleansedCode": {
                        "type": "number",
                        "description": "Cleansing status code.",
                        "example": 100
                      },
                      "minLength": {
                        "type": "number",
                        "description": "Minimum allowed length.",
                        "example": 7
                      },
                      "maxLength": {
                        "type": "number",
                        "description": "Maximum allowed length.",
                        "example": 13
                      }
                    }
                  },
                  "sms": {
                    "type": "object",
                    "properties": {
                      "countryCode": {
                        "type": "string",
                        "description": "Country code.",
                        "example": "43"
                      },
                      "phoneNumber": {
                        "type": "string",
                        "description": "Phone number.",
                        "example": "6504142107"
                      },
                      "cleansedCode": {
                        "type": "number",
                        "description": "Cleansing status code.",
                        "example": 100
                      },
                      "minLength": {
                        "type": "number",
                        "description": "Minimum allowed length.",
                        "example": 7
                      },
                      "maxLength": {
                        "type": "number",
                        "description": "Maximum allowed length.",
                        "example": 13
                      }
                    }
                  }
                }
              },
              "original": {
                "type": "object",
                "properties": {
                  "completePhoneNumber": {
                    "type": "string",
                    "description": "Complete phone number with country code.",
                    "example": "+436504142107"
                  },
                  "countryCode": {
                    "type": "string",
                    "description": "Country code.",
                    "example": "43"
                  },
                  "phoneNumber": {
                    "type": "string",
                    "description": "Phone number.",
                    "example": "6504142107"
                  }
                }
              }
            }
          },
          "location": {
            "type": "object",
            "properties": {
              "city": {
                "type": "string",
                "description": "City associated with the phone number.",
                "example": "Countrywide"
              },
              "state": {
                "type": "string",
                "description": "State associated with the phone number.",
                "nullable": true
              },
              "zip": {
                "type": "string",
                "description": "ZIP code associated with the phone number.",
                "nullable": true
              },
              "metroCode": {
                "type": "string",
                "description": "Metro code associated with the phone number.",
                "nullable": true
              },
              "county": {
                "type": "string",
                "description": "County associated with the phone number.",
                "nullable": true
              },
              "country": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Country name.",
                    "example": "Austria"
                  },
                  "iso2": {
                    "type": "string",
                    "description": "ISO 2-letter country code.",
                    "example": "AT"
                  },
                  "iso3": {
                    "type": "string",
                    "description": "ISO 3-letter country code.",
                    "example": "AUT"
                  }
                }
              },
              "coordinates": {
                "type": "object",
                "properties": {
                  "latitude": {
                    "type": "string",
                    "description": "Latitude.",
                    "nullable": true
                  },
                  "longitude": {
                    "type": "string",
                    "description": "Longitude.",
                    "nullable": true
                  }
                }
              },
              "timeZone": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Time zone name.",
                    "nullable": true
                  },
                  "utcOffsetMax": {
                    "type": "string",
                    "description": "Maximum UTC offset.",
                    "example": "+1"
                  },
                  "utcOffsetMin": {
                    "type": "string",
                    "description": "Minimum UTC offset.",
                    "example": "+1"
                  }
                }
              }
            }
          },
          "carrier": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Name of the carrier.",
                "example": "Mass Response Service GmbH"
              }
            }
          },
          "live": {
            "type": "object",
            "properties": {
              "subscriberStatus": {
                "type": "string",
                "description": "Subscriber status (e.g., 'ACTIVE').",
                "example": "ACTIVE"
              },
              "deviceStatus": {
                "type": "string",
                "description": "Device status (e.g., 'REACHABLE').",
                "example": "REACHABLE"
              },
              "roaming": {
                "type": "string",
                "description": "Roaming status (e.g., 'UNAVAILABLE').",
                "example": "UNAVAILABLE"
              },
              "roamingCountry": {
                "type": "string",
                "description": "Roaming country name.",
                "nullable": true
              },
              "roamingCountryIso2": {
                "type": "string",
                "description": "ISO 2-letter roaming country code.",
                "nullable": true
              }
            }
          }
        }
      },
      "Error400": {
        "required": [
          "message"
        ],
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Invalid request payload"
          }
        }
      },
      "Error401": {
        "required": [
          "message"
        ],
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Unauthorized request"
          }
        }
      },
      "Error403": {
        "required": [
          "message"
        ],
        "type": "object",
        "properties": { 
          "message": {
            "type": "string",
            "example": "Forbidden"
          }
        }
      },
      "Error500": {
        "required": [
          "message"
        ],
        "type": "object",
        "properties": { 
          "message": {
            "type": "string",
            "example": "Internal Server Error"
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
} 