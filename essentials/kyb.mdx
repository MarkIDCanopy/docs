---
title: KYB API
description: Know Your Business — company search and data enrichment
icon: 'building'
---
import Auth from '/snippets/auth.mdx';

# KYB API

The KYB API lets you search for a legal entity and retrieve structured company data directly from official registers and aggregated sources.

Three endpoints cover the full workflow:

- **[Authentication (`/auth`)](#authentication)** — Obtain a Bearer token using your `Api-Key` and `Customer-Id`. Required before any other call.
- **[Search (`/kyb/search`)](#1-search-company)** — Find a company by name or registration number. Returns a `companyId` and `transactionId` required for the next step.
- **[Company Details (`/kyb/company/details`)](#2-company-details)** — Retrieve the full company record. The `include` parameter controls which data packages are returned; each package is priced separately. Document and transparency packages return a list of available items with `linkToken` values.
- **[Document Retrieval (`/kyb/company/document/retrieve`)](#3-document-retrieval)** — Fetch an individual document or transparency register entry using a `linkToken` from the details response.

Where available, structured fields are returned in two forms: **native** (verbatim from the register, in the original language) and **modeled** (normalised to a common English scheme via `idcanopy`). All other data is passed through as-is from the source.

<Tabs>
  <Tab title="/kyb/search">
    Try the search endpoint [here](/api-reference/endpoint/kyb_search).
  </Tab>
  <Tab title="/kyb/company/details">
    Try the company details endpoint [here](/api-reference/endpoint/kyb_company_details).
  </Tab>
</Tabs>

---

## Authentication

**POST** `/auth`

All KYB API requests require a Bearer token. Obtain one by calling the authentication endpoint with your credentials. Tokens are valid for **60 minutes** and must be refreshed after expiration.

### Required Headers

| Header          | Value                                           |
|-----------------|-------------------------------------------------|
| `Content-Type`  | `application/x-www-form-urlencoded`             |
| `Api-Key`       | Your API key (UUID)                             |
| `Customer-Id`   | Your customer ID (UUID)                         |

### Example Request

```bash
curl -X POST https://api-umbrella.io/api/services/auth \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -H "Api-Key: 40ab0d69-fc3e-5fea-bfa8-b94e93462ad9" \
  -H "Customer-Id: 16a6c3e7-7a76-4714-9b34-97135ab4bdcd"
```

### Response

```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expires_in": 3600,
  "token_type": "Bearer"
}
```

Use the `access_token` value in the `Authorization` header of all subsequent requests:

```
Authorization: Bearer <access_token>
```

### Base URLs

| Environment | URL |
|-------------|-----|
| Production  | `https://api-umbrella.io/api/services` |
| Sandbox     | `https://sandbox-umbrella-api.azurewebsites.net/api/services` |

---

## 1. Search Company

**POST** `/kyb/search`

Searches for a legal entity by name (fuzzy) or registration number (exact). Exactly one of `name` or `companyNo` must be provided — not both.

### Required Headers

| Header          | Value                      |
|-----------------|----------------------------|
| `Content-Type`  | `application/json`         |
| `Authorization` | `Bearer <access_token>`    |

### Request Body

| Field       | Type   | Required | Description |
|-------------|--------|----------|-------------|
| `name`      | string | XOR      | Company name. Fuzzy matching is applied; quality depends on the underlying source. |
| `companyNo` | string | XOR      | Official registration number (exact match). |
| `country`   | string | **Yes**  | ISO 3166-1 alpha-2 country code (e.g. `GB`, `AT`, `DE`). |
| `locality`  | string | No       | City or locality to narrow results. |

<Note>
`name` and `companyNo` are mutually exclusive. Providing both will return a validation error.
</Note>

### Example Request — by name

```json
{
  "name": "IDCanopy Group Ltd",
  "country": "GB",
  "locality": "London"
}
```

### Example Request — by registration number

```json
{
  "companyNo": "16262990",
  "country": "GB"
}
```

### Response

The response is an array of matches. Multiple results may be returned for name-based searches.

| Field                       | Type    | Description |
|-----------------------------|---------|-------------|
| `status`                    | boolean | `true` on success. |
| `data[]`                    | array   | List of matched companies. |
| `data[].transactionId`      | string  | Session token — pass to `/kyb/company/details`. |
| `data[].companyId`          | string  | Umbrella company identifier — pass to `/kyb/company/details`. |
| `data[].name`               | string  | Registered legal name. |
| `data[].status`             | string  | Company status (e.g. `active`, `dissolved`). |
| `data[].registrationNumber` | string  | Official registration number. |
| `data[].addressLine`        | string  | Registered address, single line. |
| `data[].country`            | string  | ISO alpha-2 country code. |

### Example Response

<Accordion title="Example Response">
```json
{
  "status": true,
  "data": [
    {
      "transactionId": "a8b89ef3-9d93-4d96-a495-be605fd1b2fe",
      "companyId": "223c8dde-9c82-4811-ba3c-4f9fe648c2da",
      "name": "IDCANOPY GROUP LTD",
      "status": "active",
      "registrationNumber": "16262990",
      "addressLine": "71-75 Shelton Street, Covent Garden, London, United Kingdom, WC2H 9JQ",
      "country": "GB"
    }
  ]
}
```
</Accordion>

---

## 2. Company Details

**POST** `/kyb/company/details`

Retrieves the full company record for a previously resolved entity. Use the `transactionId` and `companyId` returned by `/kyb/search`.

The `include` object controls which data packages are returned. Only requested packages are fetched and billed.

### Required Headers

| Header          | Value                      |
|-----------------|----------------------------|
| `Content-Type`  | `application/json`         |
| `Authorization` | `Bearer <access_token>`    |

### Request Body

| Field           | Type    | Required | Description |
|-----------------|---------|----------|-------------|
| `transactionId` | string  | **Yes**  | From the search response. |
| `companyId`     | string  | **Yes**  | From the search response. |
| `include`       | object  | No       | Data packages to retrieve. All default to `false`. |
| `timeoutMs`     | integer | No       | Request timeout in milliseconds. |

### `include` Packages

| Package        | Type    | Description |
|----------------|---------|-------------|
| `officers`     | boolean | Directors, managing partners, and authorised signatories with roles, tenure, and signature rights. |
| `addresses`    | boolean | All registered and business addresses (structured and single-line). |
| `ownerships`   | boolean | Shareholder and UBO data including holding percentages, capital, and voting rights. |
| `transparency` | boolean | Transparency register entries. Returns a list of available entries with `linkToken` values for retrieval via `/kyb/company/document/retrieve`. |
| `documents`    | boolean | Official company documents (e.g. articles of association, register extracts). Returns a list of available documents with `linkToken` values for retrieval via `/kyb/company/document/retrieve`. |
| `financials`   | boolean | Available financial data such as balance sheet and revenue figures. |

### Example Request

```json
{
  "transactionId": "a8b89ef3-9d93-4d96-a495-be605fd1b2fe",
  "companyId": "223c8dde-9c82-4811-ba3c-4f9fe648c2da",
  "include": {
    "officers": true,
    "addresses": true,
    "ownerships": true,
    "transparency": true,
    "documents": true,
    "financials": false
  },
  "timeoutMs": 30000
}
```

### Response Structure

<Accordion title="Core Company Fields">
| Field | Type | Description |
|-------|------|-------------|
| `status` | boolean | `true` on success. |
| `data.company.legalName` | string | Official registered legal name. |
| `data.company.tradingNames[]` | array | Trading or alternative names. |
| `data.company.status` | string | Current status (e.g. `active`, `dissolved`). |
| `data.company.companyType` | object | Company type with `native` (register text) and `modeled` (idcanopy scheme) values. |
| `data.company.incorporationDate` | string | ISO 8601 incorporation date. |
| `data.company.registrationDate` | string | ISO 8601 registration date, if available. |
| `data.company.country` | string | ISO alpha-2 country code. |
| `data.company.registeredAddress.singleLine` | string | Full registered address, single line. |
| `data.company.registeredAddress.structured` | object | Structured address: `line1`, `line2`, `city`, `postalCode`, `region`, `country`. |
| `data.company.businessAddress` | object | Business address, same structure. May be `null`. |
| `data.company.identifiers[]` | array | Identifiers across schemes. Each entry: `scheme` (e.g. `REGISTRATION_NUMBER`, `VAT`, `LEI`), `value`, `country`. |
| `data.company.industryCodes[]` | array | Industry codes: `scheme` (e.g. `NACE`), `code`, `label`. |
| `data.company.website` | string | Official website, if available. |
| `metadata.confidence` | number | Match confidence score (0–1). |
| `metadata.completeness` | number | Data completeness score (0–1). |
| `metadata.source` | string | Name of the data source (e.g. `Companies House`). |
| `metadata.sourceTst` | string | ISO 8601 timestamp of source data retrieval. |
</Accordion>

<Accordion title="Officers (include.officers)">
Returned under `data.company.officers[]`.

| Field | Type | Description |
|-------|------|-------------|
| `type` | string | `individual` or `company`. |
| `officerID` | string | Umbrella officer identifier. |
| `officerData.firstName` | string | First name. |
| `officerData.lastName` | string | Last name. |
| `officerData.DOB` | string | Date of birth (ISO 8601). |
| `officerData.nationality` | string | ISO alpha-2 nationality code. |
| `officerData.address.singleLine` | string | Officer address. |
| `activity.role` | object | Role with `native` and `modeled` values. |
| `activity.status` | string | `active` or `inactive`. |
| `activity.from` / `activity.to` | string | Tenure start and end dates. |
| `activity.signatureRights` | object | Signatory rights with `native`, `modeled`, and `signatureQuality` (`individual` or `joint`). |
</Accordion>

<Accordion title="Ownership (include.ownerships)">
Returned under `data.company.ownership[]`.

| Field | Type | Description |
|-------|------|-------------|
| `type` | string | `individual` or `company`. |
| `ownerID` | string | Umbrella owner identifier. |
| `ownerData.firstName` / `lastName` | string | Owner name. |
| `ownerData.address.singleLine` | string | Owner address. |
| `ownerData.shareholding.holdingPct.shares` | string | Share percentage. |
| `ownerData.shareholding.holdingPct.capital` | string | Capital amount. |
| `ownerData.shareholding.holdingPct.votingRights` | string | Voting rights percentage. |
| `ownerData.shareholding.verbalholding[]` | array | Verbal holding description with `native` and `modeled` values. |
| `ownerData.isUBO` | string | Whether the owner is a UBO (`yes` / `no`). |
</Accordion>

<Accordion title="Documents & Transparency (include.documents / include.transparency)">
When `documents` or `transparency` is included, the response contains a list of available items. Pass the `linkToken` for each item to `/kyb/company/document/retrieve` to obtain the actual file.

| Field | Type | Description |
|-------|------|-------------|
| `type` | string | Document type (e.g. `excerpt`, `articles`, `transparency_entry`). |
| `description` | string | Human-readable description of the document. |
| `date` | string | Date of the document, if available. |
| `linkToken` | string | Opaque token used to retrieve the document. |
</Accordion>

### Example Response

<Accordion title="Example Response">
```json
{
  "status": true,
  "data": {
    "company": {
      "legalName": "IDCANOPY GROUP LTD",
      "tradingNames": [],
      "status": "active",
      "companyType": {},
      "incorporationDate": "2025-02-19T00:00:00.000Z",
      "registrationDate": null,
      "country": "GB",
      "registeredAddress": {
        "singleLine": "71-75 Shelton Street, WC2H 9JQ London, United Kingdom",
        "structured": {
          "line1": "71-75 Shelton Street",
          "line2": null,
          "city": "London",
          "postalCode": "WC2H 9JQ",
          "region": null,
          "country": "GB"
        }
      },
      "businessAddress": {
        "singleLine": null,
        "structured": {
          "line1": null,
          "line2": null,
          "city": null,
          "postalCode": null,
          "region": null,
          "country": "GB"
        }
      },
      "identifiers": [
        {
          "scheme": "REGISTRATION_NUMBER",
          "value": "16262990",
          "country": "GB"
        }
      ],
      "industryCodes": [],
      "website": null
    }
  },
  "metadata": {
    "confidence": 0.85,
    "completeness": 0.71,
    "source": "Companies House",
    "sourceTst": "2025-06-01T10:00:00.000Z"
  }
}
```
</Accordion>

---

## 3. Document Retrieval

**POST** `/kyb/company/document/retrieve`

Retrieves a company document or transparency register entry using a `linkToken` from the `/kyb/company/details` response.

### Required Headers

| Header          | Value                      |
|-----------------|----------------------------|
| `Content-Type`  | `application/json`         |
| `Authorization` | `Bearer <access_token>`    |

### Request Body

| Field           | Type   | Required | Description |
|-----------------|--------|----------|-------------|
| `transactionId` | string | **Yes**  | From the search response. |
| `companyId`     | string | **Yes**  | From the search response. |
| `linkToken`     | string | **Yes**  | Token from the `documents` or `transparency` list in the details response. |

### Example Request

```json
{
  "transactionId": "a8b89ef3-9d93-4d96-a495-be605fd1b2fe",
  "companyId": "223c8dde-9c82-4811-ba3c-4f9fe648c2da",
  "linkToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### Response

Returns the document as a binary file stream. The `Content-Type` response header reflects the file format (typically `application/pdf`).

<Note>
`linkToken` values are scoped to the originating `transactionId` and `companyId`. They cannot be reused across sessions.
</Note>
